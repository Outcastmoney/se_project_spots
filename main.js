!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-btn",inactiveButtonClass:"modal__submit-btn_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},t=(e,t,o)=>{const r=e.querySelector(`#${t.id}-error`);r.textContent="",t.classList.remove(o.inputErrorClass),r.classList.remove(o.errorClass)},o=(e,t,o)=>{(e=>e.some((e=>!e.validity.valid)))(e)?((e,t)=>{e.disabled=!0,e.classList.add(t.inactiveButtonClass)})(t,o):(t.disabled=!1,t.classList.remove(o.inactiveButtonClass))},r=(e,r)=>{const n=Array.from(e.querySelectorAll(r.inputSelector)),a=e.querySelector(r.submitButtonSelector);n.forEach((o=>{t(e,o,r)})),o(n,a,r)},n=document.querySelector(".profile__edit-btn"),a=document.querySelector(".profile__add-btn"),l=document.querySelector(".profile__name"),c=document.querySelector(".profile__description"),s=document.querySelector("#edit-modal"),i=s.querySelector(".modal__form"),d=s.querySelector(".modal__close-btn"),u=s.querySelector("#profile-name-input"),m=s.querySelector("#profile-description-input"),p=document.querySelector("#add-card-modal"),_=p.querySelector(".modal__form"),y=p.querySelector(".modal__close-btn"),f=p.querySelector("#add-card-name-input"),S=p.querySelector("#add-card-link-input"),v=(p.querySelector(".modal__submit-btn"),document.querySelector("#preview-modal")),q=v.querySelector(".modal__image"),b=v.querySelector(".modal__caption"),h=v.querySelector(".modal__close-btn"),g=document.querySelector("#card-template"),k=document.querySelector(".cards__list");function E(e){const t=g.content.querySelector(".card").cloneNode(!0),o=t.querySelector(".card__title"),r=t.querySelector(".card__image"),n=t.querySelector(".card__like-btn"),a=t.querySelector(".card__delete-btn");return r.src=e.link,r.alt=e.name,o.textContent=e.name,n.addEventListener("click",(()=>{n.classList.toggle("card__like-btn_liked")})),r.addEventListener("click",(()=>{L(v),q.src=e.link,q.alt=e.name,b.textContent=e.name})),a.addEventListener("click",(()=>{t.remove()})),t}function L(e){e.classList.add("modal_opened"),document.addEventListener("keydown",C)}function w(e){e.classList.remove("modal_opened"),document.removeEventListener("keydown",C)}function C(e){if("Escape"===e.key){const e=document.querySelector(".modal.modal_opened");e&&w(e)}}var x;n.addEventListener("click",(()=>{u.value=l.textContent,m.value=c.textContent,r(i,e),L(s)})),d.addEventListener("click",(()=>w(s))),a.addEventListener("click",(()=>L(p))),h.addEventListener("click",(()=>w(v))),y.addEventListener("click",(()=>w(p))),i.addEventListener("submit",(function(e){e.preventDefault(),l.textContent=u.value,c.textContent=m.value,w(s)})),_.addEventListener("submit",(function(t){t.preventDefault();const o=E({name:f.value,link:S.value});k.prepend(o),t.target.reset(),r(_,e),w(p)})),[{name:"Val Thorens",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/1-photo-by-moritz-feldmann-from-pexels.jpg"},{name:"Restaurant terrace",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/2-photo-by-ceiline-from-pexels.jpg"},{name:"An outdoor cafe",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/3-photo-by-tubanur-dogan-from-pexels.jpg"},{name:"A very long bridge, over the forest and through the trees",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/4-photo-by-maurice-laschet-from-pexels.jpg"},{name:"Tunnel with morning light",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/5-photo-by-van-anh-nguyen-from-pexels.jpg"},{name:"Mountain house",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/6-photo-by-moritz-feldmann-from-pexels.jpg"}].forEach((e=>{const t=E(e);k.prepend(t)})),document.querySelectorAll(".modal").forEach((e=>{e.addEventListener("click",(t=>{t.target===e&&w(e)}))})),x=e,Array.from(document.querySelectorAll(x.formSelector)).forEach((e=>{((e,r)=>{const n=Array.from(e.querySelectorAll(r.inputSelector)),a=e.querySelector(r.submitButtonSelector);o(n,a,r),n.forEach((l=>{l.addEventListener("input",(()=>{((e,o,r)=>{o.validity.valid?t(e,o,r):((e,t,o,r)=>{const n=e.querySelector(`#${t.id}-error`);n.textContent=o,t.classList.add(r.inputErrorClass),n.classList.add(r.errorClass)})(e,o,o.validationMessage,r)})(e,l,r),o(n,a,r)}))}))})(e,x)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBNkJJNkUsQ0FBbUIvRSxFQUFRMEIsRUFBY3hCLEdBQ3pDTyxFQUFrQkMsRUFBV2MsRUFBZXRCLEVBQU8sR0FDbkQsR0FDRixFQU1BNEUsQ0FBa0I5RSxFQUFRRSxFQUFPLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLy4vc3JjL3NjcmlwdHMvdmFsaWRhdGlvbi5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX3N1Ym1pdC1idG5cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fc3VibWl0LWJ0bl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxufTtcblxuY29uc3Qgc2hvd0lucHV0RXJyb3IgPSAoZm9ybUVsLCBpbnB1dEVsLCBlcnJvck1zZywgY29uZmlnKSA9PiB7XG4gIGNvbnN0IGVycm9yTXNnRWwgPSBmb3JtRWwucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcbiAgZXJyb3JNc2dFbC50ZXh0Q29udGVudCA9IGVycm9yTXNnO1xuICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQoY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG4gIGVycm9yTXNnRWwuY2xhc3NMaXN0LmFkZChjb25maWcuZXJyb3JDbGFzcyk7XG59O1xuXG5jb25zdCBoaWRlSW5wdXRFcnJvciA9IChmb3JtRWwsIGlucHV0RWwsIGNvbmZpZykgPT4ge1xuICBjb25zdCBlcnJvck1zZ0VsID0gZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XG4gIGVycm9yTXNnRWwudGV4dENvbnRlbnQgPSBcIlwiO1xuICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG4gIGVycm9yTXNnRWwuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuZXJyb3JDbGFzcyk7XG59O1xuXG5jb25zdCBjaGVja0lucHV0VmFsaWRpdHkgPSAoZm9ybUVsLCBpbnB1dEVsLCBjb25maWcpID0+IHtcbiAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgc2hvd0lucHV0RXJyb3IoZm9ybUVsLCBpbnB1dEVsLCBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlLCBjb25maWcpO1xuICB9IGVsc2Uge1xuICAgIGhpZGVJbnB1dEVycm9yKGZvcm1FbCwgaW5wdXRFbCwgY29uZmlnKTtcbiAgfVxufTtcblxuY29uc3QgaGFzSW52YWxpZElucHV0ID0gKGlucHV0TGlzdCkgPT4ge1xuICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0KSA9PiAhaW5wdXQudmFsaWRpdHkudmFsaWQpO1xufTtcblxuY29uc3QgZGlzYWJsZUJ1dHRvbiA9IChidXR0b25FbCwgY29uZmlnKSA9PiB7XG4gIGJ1dHRvbkVsLmRpc2FibGVkID0gdHJ1ZTtcbiAgYnV0dG9uRWwuY2xhc3NMaXN0LmFkZChjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG59O1xuXG5jb25zdCB0b2dnbGVCdXR0b25TdGF0ZSA9IChpbnB1dExpc3QsIGJ1dHRvbkVsLCBjb25maWcpID0+IHtcbiAgaWYgKGhhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XG4gICAgZGlzYWJsZUJ1dHRvbihidXR0b25FbCwgY29uZmlnKTtcbiAgfSBlbHNlIHtcbiAgICBidXR0b25FbC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIGJ1dHRvbkVsLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICB9XG59O1xuXG5jb25zdCBzZXRFdmVudExpc3RlbmVycyA9IChmb3JtRWwsIGNvbmZpZykgPT4ge1xuICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKGZvcm1FbC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5pbnB1dFNlbGVjdG9yKSk7XG4gIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBmb3JtRWwucXVlcnlTZWxlY3Rvcihjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgY29uZmlnKTtcblxuICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICBjaGVja0lucHV0VmFsaWRpdHkoZm9ybUVsLCBpbnB1dEVsZW1lbnQsIGNvbmZpZyk7XG4gICAgICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XG4gICAgfSk7XG4gIH0pO1xufTtcblxuZXhwb3J0IGNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoY29uZmlnKSA9PiB7XG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtU2VsZWN0b3IpKTtcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsKSA9PiB7XG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoZm9ybUVsLCBjb25maWcpO1xuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCByZXNldFZhbGlkYXRpb24gPSAoZm9ybUVsLCBjb25maWcpID0+IHtcbiAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShmb3JtRWwucXVlcnlTZWxlY3RvckFsbChjb25maWcuaW5wdXRTZWxlY3RvcikpO1xuICBjb25zdCBidXR0b25FbGVtZW50ID0gZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcblxuICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsLCBpbnB1dEVsZW1lbnQsIGNvbmZpZyk7XG4gIH0pO1xuXG5cbiAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBjb25maWcpO1xufTtcbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5pbXBvcnQgeyBlbmFibGVWYWxpZGF0aW9uLCByZXNldFZhbGlkYXRpb24sIHZhbGlkYXRpb25Db25maWcgfSBmcm9tIFwiLi4vc2NyaXB0cy92YWxpZGF0aW9uLmpzXCI7XG5cbmNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiVmFsIFRob3JlbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvMS1waG90by1ieS1tb3JpdHotZmVsZG1hbm4tZnJvbS1wZXhlbHMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlJlc3RhdXJhbnQgdGVycmFjZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy8yLXBob3RvLWJ5LWNlaWxpbmUtZnJvbS1wZXhlbHMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkFuIG91dGRvb3IgY2FmZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy8zLXBob3RvLWJ5LXR1YmFudXItZG9nYW4tZnJvbS1wZXhlbHMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkEgdmVyeSBsb25nIGJyaWRnZSwgb3ZlciB0aGUgZm9yZXN0IGFuZCB0aHJvdWdoIHRoZSB0cmVlc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy80LXBob3RvLWJ5LW1hdXJpY2UtbGFzY2hldC1mcm9tLXBleGVscy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiVHVubmVsIHdpdGggbW9ybmluZyBsaWdodFwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy81LXBob3RvLWJ5LXZhbi1hbmgtbmd1eWVuLWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJNb3VudGFpbiBob3VzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy82LXBob3RvLWJ5LW1vcml0ei1mZWxkbWFubi1mcm9tLXBleGVscy5qcGdcIixcbiAgfSxcbl07XG5cbmNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ0blwiKTtcbmNvbnN0IG5ld1Bvc3RCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idG5cIik7XG5jb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmFtZVwiKTtcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XG5cbmNvbnN0IGVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1tb2RhbFwiKTtcbmNvbnN0IGVkaXRGb3JtRWxlbWVudCA9IGVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuY29uc3QgZWRpdE1vZGFsQ2xvc2VCdXR0b24gPSBlZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnRuXCIpO1xuY29uc3QgZWRpdE1vZGFsTmFtZUlucHV0ID0gZWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1uYW1lLWlucHV0XCIpO1xuY29uc3QgZWRpdE1vZGFsRGVzY3JpcHRpb25JbnB1dCA9IGVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFxuICBcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCJcbik7XG5cbmNvbnN0IGNhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbW9kYWxcIik7XG5jb25zdCBjYXJkRm9ybSA9IGNhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuY29uc3QgY2FyZE1vZGFsQ2xvc2VCdXR0b24gPSBjYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnRuXCIpO1xuY29uc3QgY2FyZE5hbWVJbnB1dCA9IGNhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLW5hbWUtaW5wdXRcIik7XG5jb25zdCBjYXJkTGlua0lucHV0ID0gY2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbGluay1pbnB1dFwiKTtcbmNvbnN0IGNhcmRTdWJtaXRCdG4gPSBjYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc3VibWl0LWJ0blwiKTtcblxuY29uc3QgcHJldmlld01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmV2aWV3LW1vZGFsXCIpO1xuY29uc3QgcHJldmlld01vZGFsSW1hZ2VFbCA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcbmNvbnN0IHByZXZpZXdNb2RhbENhcHRpb25FbCA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXB0aW9uXCIpO1xuY29uc3QgcHJldmlld01vZGFsQ2xvc2VCdXR0b24gPSBwcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnRuXCIpO1xuXG5jb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIik7XG5jb25zdCBjYXJkc0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xuXG5mdW5jdGlvbiBoYW5kbGVBZGRDYXJkU3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7IG5hbWU6IGNhcmROYW1lSW5wdXQudmFsdWUsIGxpbms6IGNhcmRMaW5rSW5wdXQudmFsdWUgfTtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBnZXRDYXJkRWxlbWVudChpbnB1dFZhbHVlcyk7XG4gIGNhcmRzTGlzdC5wcmVwZW5kKGNhcmRFbGVtZW50KTtcbiAgZXZ0LnRhcmdldC5yZXNldCgpO1xuICByZXNldFZhbGlkYXRpb24oY2FyZEZvcm0sIHZhbGlkYXRpb25Db25maWcpO1xuICBjbG9zZU1vZGFsKGNhcmRNb2RhbCk7XG59XG5cbmZ1bmN0aW9uIGdldENhcmRFbGVtZW50KGRhdGEpIHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkVGVtcGxhdGUuY29udGVudFxuICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAuY2xvbmVOb2RlKHRydWUpO1xuICBjb25zdCBjYXJkTmFtZUVsID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcbiAgY29uc3QgY2FyZEltYWdlRWwgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICBjb25zdCBjYXJkTGlrZUJ0biA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idG5cIik7XG4gIGNvbnN0IGNhcmREZWxldGVCdG4gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idG5cIik7XG5cbiAgY2FyZEltYWdlRWwuc3JjID0gZGF0YS5saW5rO1xuICBjYXJkSW1hZ2VFbC5hbHQgPSBkYXRhLm5hbWU7XG4gIGNhcmROYW1lRWwudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG5cbiAgY2FyZExpa2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBjYXJkTGlrZUJ0bi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idG5fbGlrZWRcIik7XG4gIH0pO1xuXG4gIGNhcmRJbWFnZUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgb3Blbk1vZGFsKHByZXZpZXdNb2RhbCk7XG4gICAgcHJldmlld01vZGFsSW1hZ2VFbC5zcmMgPSBkYXRhLmxpbms7XG4gICAgcHJldmlld01vZGFsSW1hZ2VFbC5hbHQgPSBkYXRhLm5hbWU7XG4gICAgcHJldmlld01vZGFsQ2FwdGlvbkVsLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICB9KTtcblxuICBjYXJkRGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gIH0pO1xuXG4gIHJldHVybiBjYXJkRWxlbWVudDtcbn1cblxuZnVuY3Rpb24gb3Blbk1vZGFsKG1vZGFsKSB7XG4gIG1vZGFsLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGNsb3NlT25Fc2NhcGUpO1xufVxuXG5mdW5jdGlvbiBjbG9zZU1vZGFsKG1vZGFsKSB7XG4gIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGNsb3NlT25Fc2NhcGUpO1xufVxuXG5mdW5jdGlvbiBjbG9zZU9uRXNjYXBlKGV2ZW50KSB7XG4gIGlmIChldmVudC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICBjb25zdCBvcGVuZWRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWwubW9kYWxfb3BlbmVkXCIpO1xuICAgIGlmIChvcGVuZWRNb2RhbCkge1xuICAgICAgY2xvc2VNb2RhbChvcGVuZWRNb2RhbCk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUVkaXRGb3JtU3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBlZGl0TW9kYWxOYW1lSW5wdXQudmFsdWU7XG4gIHByb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IGVkaXRNb2RhbERlc2NyaXB0aW9uSW5wdXQudmFsdWU7XG4gIGNsb3NlTW9kYWwoZWRpdE1vZGFsKTtcbn1cblxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgZWRpdE1vZGFsTmFtZUlucHV0LnZhbHVlID0gcHJvZmlsZU5hbWUudGV4dENvbnRlbnQ7XG4gIGVkaXRNb2RhbERlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBwcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQ7XG4gIHJlc2V0VmFsaWRhdGlvbihlZGl0Rm9ybUVsZW1lbnQsIHZhbGlkYXRpb25Db25maWcpO1xuICBvcGVuTW9kYWwoZWRpdE1vZGFsKTtcbn0pO1xuXG5lZGl0TW9kYWxDbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gY2xvc2VNb2RhbChlZGl0TW9kYWwpKTtcbm5ld1Bvc3RCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IG9wZW5Nb2RhbChjYXJkTW9kYWwpKTtcbnByZXZpZXdNb2RhbENsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxuICBjbG9zZU1vZGFsKHByZXZpZXdNb2RhbClcbik7XG5jYXJkTW9kYWxDbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gY2xvc2VNb2RhbChjYXJkTW9kYWwpKTtcbmVkaXRGb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUVkaXRGb3JtU3VibWl0KTtcbmNhcmRGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlQWRkQ2FyZFN1Ym1pdCk7XG5cbmluaXRpYWxDYXJkcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gZ2V0Q2FyZEVsZW1lbnQoaXRlbSk7XG4gIGNhcmRzTGlzdC5wcmVwZW5kKGNhcmRFbGVtZW50KTtcbn0pO1xuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsXCIpLmZvckVhY2goKG1vZGFsKSA9PiB7XG4gIG1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcbiAgICBpZiAoZXZlbnQudGFyZ2V0ID09PSBtb2RhbCkge1xuICAgICAgY2xvc2VNb2RhbChtb2RhbCk7XG4gICAgfVxuICB9KTtcbn0pO1xuXG5lbmFibGVWYWxpZGF0aW9uKHZhbGlkYXRpb25Db25maWcpO1xuXG4iXSwibmFtZXMiOlsidmFsaWRhdGlvbkNvbmZpZyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiaGlkZUlucHV0RXJyb3IiLCJmb3JtRWwiLCJpbnB1dEVsIiwiY29uZmlnIiwiZXJyb3JNc2dFbCIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsInRleHRDb250ZW50IiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJpbnB1dExpc3QiLCJidXR0b25FbCIsInNvbWUiLCJpbnB1dCIsInZhbGlkaXR5IiwidmFsaWQiLCJoYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlQnV0dG9uIiwiZGlzYWJsZWQiLCJhZGQiLCJyZXNldFZhbGlkYXRpb24iLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiYnV0dG9uRWxlbWVudCIsImZvckVhY2giLCJpbnB1dEVsZW1lbnQiLCJwcm9maWxlRWRpdEJ1dHRvbiIsImRvY3VtZW50IiwibmV3UG9zdEJ1dHRvbiIsInByb2ZpbGVOYW1lIiwicHJvZmlsZURlc2NyaXB0aW9uIiwiZWRpdE1vZGFsIiwiZWRpdEZvcm1FbGVtZW50IiwiZWRpdE1vZGFsQ2xvc2VCdXR0b24iLCJlZGl0TW9kYWxOYW1lSW5wdXQiLCJlZGl0TW9kYWxEZXNjcmlwdGlvbklucHV0IiwiY2FyZE1vZGFsIiwiY2FyZEZvcm0iLCJjYXJkTW9kYWxDbG9zZUJ1dHRvbiIsImNhcmROYW1lSW5wdXQiLCJjYXJkTGlua0lucHV0IiwicHJldmlld01vZGFsIiwicHJldmlld01vZGFsSW1hZ2VFbCIsInByZXZpZXdNb2RhbENhcHRpb25FbCIsInByZXZpZXdNb2RhbENsb3NlQnV0dG9uIiwiY2FyZFRlbXBsYXRlIiwiY2FyZHNMaXN0IiwiZ2V0Q2FyZEVsZW1lbnQiLCJkYXRhIiwiY2FyZEVsZW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiY2FyZE5hbWVFbCIsImNhcmRJbWFnZUVsIiwiY2FyZExpa2VCdG4iLCJjYXJkRGVsZXRlQnRuIiwic3JjIiwibGluayIsImFsdCIsIm5hbWUiLCJhZGRFdmVudExpc3RlbmVyIiwidG9nZ2xlIiwib3Blbk1vZGFsIiwibW9kYWwiLCJjbG9zZU9uRXNjYXBlIiwiY2xvc2VNb2RhbCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldmVudCIsImtleSIsIm9wZW5lZE1vZGFsIiwidmFsdWUiLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsInByZXBlbmQiLCJ0YXJnZXQiLCJyZXNldCIsIml0ZW0iLCJzZXRFdmVudExpc3RlbmVycyIsImNoZWNrSW5wdXRWYWxpZGl0eSIsInNob3dJbnB1dEVycm9yIiwiZXJyb3JNc2ciLCJ2YWxpZGF0aW9uTWVzc2FnZSJdLCJzb3VyY2VSb290IjoiIn0=